<div class="row-fluid span12 header-page">
    <!-- <ul class="breadcrumb">
        <li><a href="#">Home</a> <span class="divider">/</span></li>
        <li><a href="#">Menu</a> <span class="divider">/</span></li>
        <li class="active">Data</li>
    </ul> -->

    <div class="well">
        <div class="action-button-group">
            <a href="#" class="btn btn-danger left" data-bind="click: deleteItems">Delete</a>
            <a href="#" class="btn btn-primary right" id="newMenuBtn" data-bind="click: addNew">New</a>
            <div class="clearfix"></div>
        </div>
        <table class="table table-hover" data-bind="treeTable: menus, treeOptions: {expandable: true, initialState: 'expanded', clickableNodeNames: true, 'column': 1}">
            <thead>
                <th><input type="checkbox" name="items-cb" data-bind="click: chooseAllItems, checked: isChecked" /></th>
                <th>Name</th>
                <th>SEO</th>
                <th>Page</th>
                <th>Visible</th>
                <th>See</th>
                <th>Action</th>
            </thead>
            <tbody>
                <!-- ko foreach: menus -->
                <tr data-bind="attr: {'data-tt-id': id, 'data-tt-parent-id': menu_id}">
                    <td><input type="checkbox" name="item-cb" data-bind="value: id, click: $parent.chooseItem, checked: isChecked" /></td>
                    <td data-bind="text: nameView"></td>
                    <td data-bind="text: titleView + ' - ' + descriptionView"></td>
                    <td><a href="#" data-bind="click: $parent.openPageForm, text: pageManager"></a></td>
                    <td><a href="#" data-bind="click: $parent.switchVisibleAndHidden"><i data-bind="attr: {'class': visibleIcon}"></i></a></td>
                    <td><a href="#"></a></td>
                    <td><a href="#" title="edit" data-bind="click: $parent.editItem"><i class="icon-edit"></i></a>&nbsp;&nbsp;&nbsp;<a href="#" title="delete" data-bind="click: $parent.deleteItem"><i class="icon-remove"></i></a></td>
                    <!-- <th><a href="#" d></a></th> -->
                </tr>
                <!-- /ko -->
            </tbody>
        </table>
    </div><!--/.well -->
</div><!--/span-->

<div class="page-container">
    <form id="newForm" class="modal hide fade" method="post" action="/vn/menu/create/" tabindex="-1" data-width="760">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
        <h3>New</h3>
      </div>
      <div class="modal-body">
        <div class="row-fluid">
          <div class="span12">
            <input type="hidden" data-bind="value: currentMenu().id" name="id" />
            <div>
                <p class="group-field">
                    <label class="form-lb left span3 alignright">Name:</label>
                    <input type="text" name="name" class="span8 left" data-bind="value: currentMenu().name">
                </p>
            </div>
            <div>
                <p class="group-field">
                    <label class="form-lb left span3 alignright">Parent Menu:</label>
                    <select name="menu_id" class="span8 left" 
                    data-bind="value: currentMenu().menu_id, options: menus, optionsText: function(item) {
                        spaceLevel = '';
                        for(i = 0; i < item.level() - 1; i++) {
                            spaceLevel += '&nbsp; &nbsp;';
                        }
                        spaceLevel += item.level() == 1 ? ' + ': ' - ';
                        return spaceLevel + item.name();
                   }, optionsValue: 'id', optionsCaption: '-- Root --'">
                        
                    </select>
                </p>
            </div>
            <div>
                <p class="group-field">
                    <label class="form-lb left span3 alignright">Anchor:</label>
                    <input type="text" name="anchor" class="span8 left" data-bind="value: currentMenu().anchor">
                </p>
            </div>
            <div>
                <p class="group-field">
                    <label class="form-lb left span3 alignright">Title:</label>
                    <input type="text" name="title" class="span8 left" data-bind="value: currentMenu().title">
                </p>
            </div>
            <div>
                <p class="group-field">
                    <label class="form-lb left span3 alignright">Description:</label>
                    <input type="text" name="description" class="span8 left" data-bind="value: currentMenu().description">
                </p>
            </div>
            <div>
                <p class="group-field">
                    <label class="form-lb left span3 alignright">Order:</label>
                    <input type="text" name="order" class="span8 left" data-bind="value: currentMenu().order">
                </p>
            </div>
            <div>
                <p class="group-field">
                    <label class="form-lb left span3 alignright">Visible:</label>
                    <input type="checkbox" name="visible" checked="checked" value="y" class="left" data-bind="checked: currentMenu().visibleCheck"/>
                </p>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-primary">Save</button>
        <button type="button" data-dismiss="modal" class="btn">Close</button>
      </div>
    </form>
</div>

<div class="page-container">
    <form id="newPage" class="modal hide fade" method="post" action="/vn/page/" tabindex="-1" data-width="760">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
        <h3>New Page <small data-bind="text: currentMenu().name"></small></h3>
      </div>
      <div class="modal-body">
        <div class="row-fluid">
          <div class="span12">
            <div>
                <p class="group-field">
                    <label class="form-lb left span3 alignright">Content:</label>
                    <textarea id="pageContent" name="content" class="span8 left noresize" rows="10" data-bind="text: currentMenu().page().content"></textarea>
                </p>
            </div>
            
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-primary" data-bind="click: savePage">Save</button>
        <button type="button" data-dismiss="modal" class="btn">Close</button>
      </div>
    </form>
</div>